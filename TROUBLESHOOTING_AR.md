# ๐ง ุฏููู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง

## ุงููุดุงูู ุงูุดุงุฆุนุฉ ูุงูุญููู

### 1. ุงูุฑุณุงุฆู ูุง ุชูุฑุณู โ

#### ุงูุฃุนุฑุงุถ:
- ูุชุงุจุฉ ุฑุณุงูุฉ ูุงูุถุบุท ุนูู Send
- ูุง ุดูุก ูุญุฏุซ
- ุงูุฑุณุงูุฉ ูุง ุชุธูุฑ

#### ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:

**ุฃ) WebSocket ุบูุฑ ูุชุตู**
```javascript
// ุงูุชุญ Console ูู ุงููุชุตูุญ (F12)
// ูุฌุจ ุฃู ุชุฑู:
โ "Chat WebSocket connected"
โ "Notification WebSocket connected"

// ุฅุฐุง ุฑุฃูุช:
โ "WebSocket connection failed"
โ "403 Forbidden"
```

**ุงูุญู:**
```bash
# 1. ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู
# 2. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ (F5)
# 3. ุชุญูู ูู Console ููุฃุฎุทุงุก
```

**ุจ) Daphne ูุง ูุนูู**
```bash
# ุชุญูู ูู ุชุดุบูู Daphne
ps aux | grep daphne

# ุฅุฐุง ูู ููู ูุนููุ ุดุบููู:
daphne -b 0.0.0.0 -p 8000 core.asgi:application
```

**ุฌ) ุงููููุฐ 8000 ูุณุชุฎุฏู**
```bash
# ุฃููู ุงูุนูููุฉ ุงููุฏููุฉ
pkill -f daphne

# ุฃู ุงูุชู ุงูุนูููุฉ ูุฏููุงู
lsof -ti:8000 | xargs kill -9

# ุซู ุดุบูู ูู ุฌุฏูุฏ
daphne -b 0.0.0.0 -p 8000 core.asgi:application
```

---

### 2. ุงููุณุงุฆุท ูุง ุชูุฑูุน โ

#### ุงูุฃุนุฑุงุถ:
- ุงูุถุบุท ุนูู ุฒุฑ ๐
- ุงุฎุชูุงุฑ ููู
- ูุง ุดูุก ูุญุฏุซ

#### ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:

**ุฃ) CSRF Token ููููุฏ**
```javascript
// ูู Console:
โ "CSRF verification failed"
```

**ุงูุญู:**
```javascript
// ุชุฃูุฏ ูู ูุฌูุฏ CSRF token ูู cookies
document.cookie

// ูุฌุจ ุฃู ุชุฑู: csrftoken=...
```

**ุจ) ุญุฌู ุงูููู ูุจูุฑ ุฌุฏุงู**
```python
# ูู settings.py
# ุฃุถู:
DATA_UPLOAD_MAX_MEMORY_SIZE = 10485760  # 10MB
FILE_UPLOAD_MAX_MEMORY_SIZE = 10485760  # 10MB
```

**ุฌ) ูุฌูุฏ media ุบูุฑ ููุฌูุฏ**
```bash
# ุฃูุดุฆ ุงููุฌูุฏ
mkdir -p media/attachments

# ุฃุนุทู ุงูุตูุงุญูุงุช
chmod 755 media
```

---

### 3. ุงูููุงููุงุช ูุง ุชุนูู โ

#### ุงูุฃุนุฑุงุถ:
- ุงูุถุบุท ุนูู ๐ Call
- ูุง ูุญุฏุซ ุดูุก
- ุฃู "Failed to initiate call"

#### ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:

**ุฃ) ุงููููุฑูููู ูุญุธูุฑ**
```
ุงููุชุตูุญ: ูุทูุจ ุฅุฐู ุงููููุฑูููู
ุฃูุช: ุฑูุถุช ุงูุฅุฐู โ
```

**ุงูุญู:**
```
1. ุงุถุบุท ุนูู ุฃููููุฉ ุงูููู ูู ุดุฑูุท ุงูุนููุงู
2. ุงุณูุญ ุจุงููุตูู ูููููุฑูููู
3. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ
```

**ุจ) WebSocket ุบูุฑ ูุชุตู**
```javascript
// ูู Console:
โ "Call WebSocket error"
```

**ุงูุญู:**
```
1. ุชุญูู ูู ุชุดุบูู Daphne
2. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ
3. ุญุงูู ูุฑุฉ ุฃุฎุฑู
```

**ุฌ) ุงููุณุชุฎุฏู ุงูุขุฎุฑ ุบูุฑ ูุชุตู**
```
ุงููุณุชูุจู: ุบูุฑ ูุณุฌู ุฏุฎูู
ุฃู: ูู ุตูุญุฉ ุฃุฎุฑู ุจุฏูู WebSocket
```

**ุงูุญู:**
```
1. ุชุฃูุฏ ูู ุชุณุฌูู ุฏุฎูู ุงูุทุฑููู
2. ุชุฃูุฏ ูู ูุชุญ ุงูุตูุญุฉ ูู ููุง ุงููุชุตูุญูู
3. ุชุญูู ูู Console ูู ููุง ุงููุงูุฐุชูู
```

---

### 4. ุฅุดุนุงุฑุงุช ุงูููุงููุงุช ูุง ุชุธูุฑ โ

#### ุงูุฃุนุฑุงุถ:
- ุงููุชุตู ูุฑู "Call in progress"
- ุงููุณุชูุจู ูุง ูุฑู ุฃู ุดูุก

#### ุงูุชุดุฎูุต:

**ูู ูุงูุฐุฉ ุงููุชุตู:**
```javascript
// Console:
โ "Chat WebSocket connected"
โ "Notification WebSocket connected"
```

**ูู ูุงูุฐุฉ ุงููุณุชูุจู:**
```javascript
// Console:
โ "Notification WebSocket connected"  โ ููู ุฌุฏุงู!

// ุฅุฐุง ูู ุชุฑู ูุฐุง:
โ ุงููุดููุฉ: WebSocket ุงูุฅุดุนุงุฑุงุช ุบูุฑ ูุชุตู
```

**ุงูุญู:**
```
1. ุฃุนุฏ ุชุญููู ุตูุญุฉ ุงููุณุชูุจู (F5)
2. ุชุญูู ูู Console
3. ูุฌุจ ุฃู ุชุฑู "Notification WebSocket connected"
4. ุญุงูู ุงูููุงููุฉ ูุฑุฉ ุฃุฎุฑู
```

---

### 5. ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ูู Console

#### ุฎุทุฃ: "WebSocket connection to 'ws://...' failed"
```
ุงูุณุจุจ: Daphne ูุง ูุนูู
ุงูุญู: ุดุบูู Daphne
```

#### ุฎุทุฃ: "403 Forbidden"
```
ุงูุณุจุจ: ุงููุณุชุฎุฏู ุบูุฑ ูุณุฌู ุฏุฎูู
ุงูุญู: ุณุฌู ุฏุฎูู ุฃููุงู
```

#### ุฎุทุฃ: "CSRF verification failed"
```
ุงูุณุจุจ: CSRF token ููููุฏ
ุงูุญู: ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ
```

#### ุฎุทุฃ: "Failed to initiate call"
```
ุงูุณุจุจ: ุฎุทุฃ ูู API
ุงูุญู: ุชุญูู ูู Console ููุชูุงุตูู
```

---

## ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ ุงููุงููุฉ

### ุงุฎุชุจุงุฑ ุงูุฑุณุงุฆู

```
1. ุงูุชุญ ูุงูุฐุชูู
   ูุงูุฐุฉ 1: ุชุณุฌูู ุฏุฎูู ูู "ahmed"
   ูุงูุฐุฉ 2: ุชุณุฌูู ุฏุฎูู ูู "sara"

2. ูู ููุง ุงููุงูุฐุชููุ ุงูุชุญ Console (F12)
   ูุฌุจ ุฃู ุชุฑู:
   โ "Chat WebSocket connected"
   โ "Notification WebSocket connected"

3. ูุงูุฐุฉ 1 (ahmed):
   - ุงุฐูุจ ุฅูู /chat/1/ ูุน sara
   - ุงูุชุจ ุฑุณุงูุฉ
   - ุงุถุบุท Enter ุฃู Send
   - ูุฌุจ ุฃู ุชุธูุฑ ุงูุฑุณุงูุฉ ููุฑุงู โ

4. ูุงูุฐุฉ 2 (sara):
   - ูู /chat/1/ ูุน ahmed
   - ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ ahmed ููุฑุงู โ
```

### ุงุฎุชุจุงุฑ ุงููุณุงุฆุท

```
1. ูู ูุงูุฐุฉ ahmed:
   - ุงุถุบุท ุฒุฑ ๐
   - ุงุฎุชุฑ ุตูุฑุฉ
   - ูุฌุจ ุฃู ุชูุฑูุน ูุชุธูุฑ ูู ุงูุฏุฑุฏุดุฉ โ

2. ูู ูุงูุฐุฉ sara:
   - ูุฌุจ ุฃู ุชุธูุฑ ุงูุตูุฑุฉ ููุฑุงู โ
```

### ุงุฎุชุจุงุฑ ุงูููุงููุงุช

```
1. ูู ูุงูุฐุฉ ahmed:
   - ุงุถุบุท "๐ Call"
   - ุงุณูุญ ุจุงููููุฑูููู
   - ูุฌุจ ุฃู ุชุฑู "Calling..." โ

2. ูู ูุงูุฐุฉ sara (ูู ุฃู ุตูุญุฉ):
   - ูุฌุจ ุฃู ุชุธูุฑ ูุงูุฐุฉ ููุจุซูุฉ โ
   - "ahmed is calling you..."
   - ุงุถุบุท "โ Accept"
   - ุงุณูุญ ุจุงููููุฑูููู
   - ูุฌุจ ุฃู ุชุจุฏุฃ ุงูููุงููุฉ โ
```

---

## ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช

### 1. ุชุญูู ูู Daphne
```bash
# ูุฌุจ ุฃู ูููู ูุนูู
ps aux | grep daphne

# ูุฌุจ ุฃู ุชุฑู:
daphne -b 0.0.0.0 -p 8000 core.asgi:application
```

### 2. ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุชุญูู ูู ุงูุฌุฏุงูู
python manage.py dbshell
.tables

# ูุฌุจ ุฃู ุชุฑู:
chat_customuser
chat_conversation
chat_message
chat_voicecall
...
```

### 3. ุชุญูู ูู ุงููููุงุช ุงูุซุงุจุชุฉ
```bash
# ูุฌุจ ุฃู ูููู ููุฌูุฏ
ls staticfiles/

# ุฅุฐุง ูู ููู ููุฌูุฏ:
python manage.py collectstatic --noinput
```

### 4. ุชุญูู ูู ูุฌูุฏ media
```bash
# ุฃูุดุฆู ุฅุฐุง ูู ููู ููุฌูุฏ
mkdir -p media/attachments
mkdir -p media/avatars

# ุฃุนุทู ุงูุตูุงุญูุงุช
chmod -R 755 media
```

---

## ุงูุฃูุงูุฑ ุงููููุฏุฉ

### ุฅุนุงุฏุฉ ุชุดุบูู ูู ุดูุก
```bash
# 1. ุฃููู Daphne
pkill -f daphne

# 2. ุฌูุน ุงููููุงุช ุงูุซุงุจุชุฉ
python manage.py collectstatic --noinput

# 3. ุดุบูู Daphne
daphne -b 0.0.0.0 -p 8000 core.asgi:application
```

### ูุณุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ููุงุฎุชุจุงุฑ ููุท!)
```bash
# ุงุญุฐู ูุงุนุฏุฉ ุงูุจูุงูุงุช
rm db.sqlite3

# ุฃุนุฏ ุฅูุดุงุก ุงูุฌุฏุงูู
python manage.py migrate

# ุฃูุดุฆ ูุณุชุฎุฏู ุฌุฏูุฏ
python manage.py createsuperuser
```

### ูุญุต ุงูุฃุฎุทุงุก
```bash
# ุดุงูุฏ ุฃุฎุทุงุก Daphne
daphne -v 2 -b 0.0.0.0 -p 8000 core.asgi:application

# ูุญุต ุฅุนุฏุงุฏุงุช Django
python manage.py check

# ูุญุต WebSocket
python manage.py shell
>>> from channels.layers import get_channel_layer
>>> channel_layer = get_channel_layer()
>>> print(channel_layer)
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

ูุจู ุงูุงุฎุชุจุงุฑุ ุชุฃูุฏ ูู:

- [ ] Daphne ูุนูู ุนูู ุงููููุฐ 8000
- [ ] ุชุณุฌูู ุฏุฎูู ูู ููุง ุงููุงูุฐุชูู
- [ ] Console ููุชูุญ (F12) ูู ููุง ุงููุงูุฐุชูู
- [ ] ุชุฑู "WebSocket connected" ูู Console
- [ ] ูุฌูุฏ media ููุฌูุฏ ููู ุตูุงุญูุงุช
- [ ] ุงููููุงุช ุงูุซุงุจุชุฉ ุชู ุฌูุนูุง
- [ ] ุงูุณูุงุญ ุจุงููููุฑูููู ูู ุงููุชุตูุญ

ุฅุฐุง ูุงูุช ุฌููุน ุงูููุงุท โุ ูุฌุจ ุฃู ูุนูู ูู ุดูุก!

---

## ๐ ุฅุฐุง ูู ูุนูู ุดูุก

1. **ุฃุนุฏ ุชุดุบูู ูู ุดูุก:**
   ```bash
   pkill -f daphne
   python manage.py collectstatic --noinput
   daphne -b 0.0.0.0 -p 8000 core.asgi:application
   ```

2. **ุฃุนุฏ ุชุญููู ุงููุชุตูุญ:**
   - ุงุถุบุท Ctrl+Shift+R (ุฅุนุงุฏุฉ ุชุญููู ูุงููุฉ)
   - ุฃู ุงูุณุญ ุงููุงุด

3. **ุชุญูู ูู Console:**
   - ุงูุชุญ F12
   - ุงุฐูุจ ุฅูู Console
   - ุงุจุญุซ ุนู ุฃุฎุทุงุก ุญูุฑุงุก
   - ุฃุฑุณู ูู ุงูุฃุฎุทุงุก

4. **ุฌุฑุจ ูุชุตูุญ ุขุฎุฑ:**
   - Chrome/Chromium
   - Firefox
   - Edge

---

**ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุฃุฑุณู ูู:**
1. ุฃุฎุทุงุก Console (F12)
2. ุฃุฎุทุงุก Daphne ูู Terminal
3. ุฃู ุฑุณุงุฆู ุฎุทุฃ ุชุธูุฑ

ูุณุฃุณุงุนุฏู ูู ุญููุง! ๐
